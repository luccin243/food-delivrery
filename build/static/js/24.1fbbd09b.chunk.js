(this["webpackJsonpstock-mgt"]=this["webpackJsonpstock-mgt"]||[]).push([[24],{626:function(e,t,a){"use strict";a.r(t);var c=a(15),s=a.n(c),r=a(22),n=a(23),i=a(8),l=a(76),o=a(0),d=a(14),b=a(10),j=a(100),u=a(1),O=function(e){var t=e.data,a=e.onDisable,c=(e.onEdit,e.onLoad),s=Object(b.b)(),r=s.user,n=(s.token,t.firstName),i=t.lastName,l=(t.role,t.avatar),o=t.disable;return Object(u.jsx)("div",{className:"col-md-4 col-xs-12",children:Object(u.jsx)("div",{class:"card",children:Object(u.jsxs)("div",{className:"card-body text-center",children:[Object(u.jsx)("img",{alt:"profile",className:"rounded-circle margin-b-10",src:"".concat(d.a,"/").concat(l),style:{opacity:"".concat(o?.5:1)},width:80}),Object(u.jsxs)("p",{className:"lead margin-b-0 p-3",style:{opacity:"".concat(o?.5:1),textDecoration:"".concat(o?"line-through":"none")},children:[n," ",i]}),0===r.role&&Object(u.jsxs)("button",{type:"button",disabled:c,onClick:a,class:"btn btn-".concat(o?"success":"danger"," btn-icon"),children:[Object(u.jsx)("i",{class:"fa ".concat(o?"fa-check-circle":"fa-times")}),o?"Active":"Disable"]}),Object(u.jsx)("hr",{}),Object(u.jsxs)("ul",{className:"list-unstyled margin-b-0 text-center row",children:[Object(u.jsxs)("li",{className:"col-4",children:[Object(u.jsx)("span",{className:"font-600 text-indigo",children:"0"}),Object(u.jsx)("p",{className:"text-indigo text-sm margin-b-0",children:"Orders closed"})]}),Object(u.jsxs)("li",{className:"col-4",children:[Object(u.jsx)("span",{className:"font-600 text-waring",children:"0"}),Object(u.jsx)("p",{className:"text-waring text-sm margin-b-0",children:"Pending orders"})]}),Object(u.jsxs)("li",{className:"col-4",children:[Object(u.jsx)("span",{className:"font-600 text-success",children:"0"}),Object(u.jsx)("p",{className:"text-success text-sm margin-b-0",children:"Orders delivered"})]})]})]})})})},m=a(232),p=function(e){var t=e.data,a=e.onDisable,c=e.onEdit,s=e.onLoad,r=Object(b.b)(),n=(r.user,r.token,t.firstName),i=t.lastName,l=(t.role,t.avatar),o=t.disable;return Object(u.jsx)("div",{className:"col-md-4 col-xs-12",children:Object(u.jsxs)("div",{className:"widget white-bg text-center",children:[Object(u.jsx)("img",{alt:"profile",className:"rounded-circle margin-b-10",src:"".concat(d.a,"/").concat(l),style:{opacity:"".concat(o?.5:1)},width:80}),Object(u.jsxs)("p",{className:"lead margin-b-0 p-3",style:{opacity:"".concat(o?.5:1),textDecoration:"".concat(o?"line-through":"none")},children:[n," ",i]}),Object(u.jsxs)("div",{children:[Object(u.jsxs)("a",{href:"#","data-toggle":"modal","data-target":"".concat(o||".myModalUpdate"),onClick:c,style:{margin:"0 5px",cursor:"".concat(o?"not-allowed":"pointer"),opacity:"".concat(o?.5:1)},class:"btn btn-info btn-icon",children:[Object(u.jsx)("i",{class:"fa fa-edit "}),"\xc9diter"]}),Object(u.jsxs)("button",{type:"button",disabled:s,onClick:a,class:"btn btn-".concat(o?"success":"danger"," btn-icon"),children:[Object(u.jsx)("i",{class:"fa ".concat(o?"fa-check-circle":"fa-times")}),o?"Active":"Disable"]})]})]})})},x=a(81),f=a(84),h=a(82),v=a(233),g=a(145),N=a(612),y=a(78),w=a(628),k=a(326);t.default=function(){var e=Object(o.useState)(""),t=Object(l.a)(e,2),a=(t[0],t[1],Object(o.useState)("")),c=Object(l.a)(a,2),d=c[0],_=c[1],D=Object(o.useState)(""),L=Object(l.a)(D,2),E=L[0],S=L[1],C=Object(o.useState)(""),M=Object(l.a)(C,2),R=M[0],A=M[1],P=Object(o.useState)({updateFirstName:"",updateLastName:"",updateRole:"",id:""}),F=Object(l.a)(P,2),B=F[0],H=F[1],U=Object(o.useState)({firstName:"",lastName:"",email:"",password:"",role:""}),J=Object(l.a)(U,2),V=J[0],z=J[1],I=Object(o.useState)({error:"",success:"",loading:!1}),q=Object(l.a)(I,2),G=q[0],K=q[1],Q=Object(o.useState)({total:0,page:0,pages:0,limit:10}),T=Object(l.a)(Q,2),W=T[0],X=T[1],Y=Object(o.useState)(!1),Z=Object(l.a)(Y,2),$=Z[0],ee=(Z[1],Object(o.useState)(!1)),te=Object(l.a)(ee,2),ae=(te[0],te[1],Object(o.useState)(!1)),ce=Object(l.a)(ae,2),se=(ce[0],ce[1],W.total,W.page),re=(W.pages,W.limit),ne=G.loading,ie=G.loader,le=G.success,oe=G.error,de=V.firstName,be=V.lastName,je=V.role,ue=V.password,Oe=V.email,me=B.updateFirstName,pe=B.updateLastName,xe=B.updateRole,fe=B.id,he=Object(b.b)(),ve=he.user,ge=he.token,Ne=function(e){return function(t){K({error:!1,success:!1,loader:!1}),z(Object(i.a)(Object(i.a)({},V),{},Object(n.a)({},e,t.target.value)))}},ye=function(){var e=Object(r.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.c)(t);case 2:if(!(a=e.sent).error){e.next=5;break}return e.abrupt("return",K({error:a.error,loader:!1,success:!1}));case 5:H({updateFirstName:a.firstName,updateLastName:a.lastName,updateRole:a.role,id:a._id});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(e){return function(t){K({error:!1,success:!1,loader:!1}),H(Object(i.a)(Object(i.a)({},B),{},Object(n.a)({},e,t.target.value)))}},ke=function(){var e=Object(r.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),K({error:!1,success:!1,loader:!0}),e.next=4,Object(j.a)(ge,V);case 4:if(!(a=e.sent).error){e.next=7;break}return e.abrupt("return",K({error:a.error,loader:!1}));case 7:K({error:!1,success:a.message,loader:!1}),z({firstName:"",lastName:"",role:"",password:"",email:""});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e=function(e){return function(){var t=Object(r.a)(s.a.mark((function t(a){var c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),K({error:!1,success:!1,loader:!0}),t.next=4,Object(j.e)(e,ge,{firstName:me,lastName:pe,role:xe});case 4:if(!(c=t.sent).error){t.next=7;break}return t.abrupt("return",K(Object(i.a)(Object(i.a)({},G),{},{error:c.error,loader:!1})));case 7:K(Object(i.a)(Object(i.a)({},G),{},{loader:!1,success:c.message})),H(Object(i.a)(Object(i.a)({},B),{},{updateFirstName:c.firstName,updateLastName:c.lastName,updateRole:c.role}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},De=function(){z({firstName:"",lastName:"",role:"",password:"",email:""}),K({error:!1,success:!1,loader:!1})},Le=function(){var e=Object(r.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K({error:!1,success:!1,loader:!0}),e.next=3,Object(j.d)(t,ge);case 3:if(!(a=e.sent).error){e.next=6;break}return e.abrupt("return",K({error:a.error,success:!1,loader:!1}));case 6:K({error:!1,success:!1,loader:!1});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){Object(r.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K(Object(i.a)(Object(i.a)({},G),{},{loading:!0})),e.next=3,Object(y.b)("/read/all/client/".concat(ve._id,"?limit=").concat(re,"&page=").concat(se));case 3:if(!(t=e.sent)||!t.error){e.next=6;break}return e.abrupt("return",K(Object(i.a)(Object(i.a)({},G),{},{loading:!1,error:t.error})));case 6:_(t&&t.data),X(Object(i.a)(Object(i.a)({},W),{},{total:t.total,page:t.page})),K(Object(i.a)(Object(i.a)({},G),{},{loading:!1}));case 9:case"end":return e.stop()}}),e)})))()}),[re,$,se]),Object(o.useEffect)((function(){Object(r.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K(Object(i.a)(Object(i.a)({},G),{},{loading:!0})),e.next=3,Object(y.b)("/read/all/livreur/".concat(ve._id,"?limit=").concat(re,"&page=").concat(se));case 3:if(!(t=e.sent)||!t.error){e.next=6;break}return e.abrupt("return",K(Object(i.a)(Object(i.a)({},G),{},{loading:!1,error:t.error})));case 6:A(t&&t.data),X(Object(i.a)(Object(i.a)({},W),{},{total:t.total,page:t.page})),K(Object(i.a)(Object(i.a)({},G),{},{loading:!1}));case 9:case"end":return e.stop()}}),e)})))()}),[re,$,se]),Object(o.useEffect)((function(){Object(r.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K(Object(i.a)(Object(i.a)({},G),{},{loading:!0})),e.next=3,Object(y.b)("/read/all/admin/".concat(ve._id,"?limit=").concat(re,"&page=").concat(se));case 3:if(!(t=e.sent)||!t.error){e.next=6;break}return e.abrupt("return",K(Object(i.a)(Object(i.a)({},G),{},{loading:!1,error:t.error})));case 6:S(t&&t.data),X(Object(i.a)(Object(i.a)({},W),{},{total:t.total,page:t.page})),K(Object(i.a)(Object(i.a)({},G),{},{loading:!1}));case 9:case"end":return e.stop()}}),e)})))()}),[re,$,se]),Object(u.jsxs)(f.a,{children:[Object(u.jsx)(h.a,{parent:"Accueil",content:"Utilisateurs",title:"Liste de utitlisateurs",create:!0}),Object(u.jsx)("div",{class:"modal fade myModal",tabindex:"-1",role:"dialog","aria-labelledby":"myDefaultModalLabel",children:Object(u.jsx)("div",{class:"modal-dialog",role:"document",children:Object(u.jsxs)("div",{class:"modal-content",children:[Object(u.jsxs)("div",{class:"modal-header",children:[Object(u.jsx)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:De,children:Object(u.jsx)("span",{"aria-hidden":"true",class:"fa fa-times"})}),Object(u.jsx)("h5",{class:"modal-title",id:"myDefaultModalLabel",children:"Nouvel utilisateur"})]}),ie&&Object(u.jsx)(N.a,{color:"secondary",style:{width:"100%"}}),Object(u.jsxs)("div",{class:"modal-body",children:[(oe||le)&&Object(u.jsxs)("div",{class:"alert bg-".concat(oe?"danger":"success"," alert-dismissible fade show"),role:"alert",children:[Object(u.jsxs)("strong",{children:[oe?"Erreur":"Succ\xe8s","!"]})," ",oe||le]}),Object(u.jsx)(g.a,{icon:"fa fa-user",action:Ne("firstName"),value:de,type:"text",placeholder:"Nom"}),Object(u.jsx)(g.a,{icon:"fa fa-user",action:Ne("lastName"),value:be,type:"text",placeholder:"Postnom"}),Object(u.jsx)(g.a,{icon:"fa fa-at",action:Ne("email"),value:Oe,type:"text",placeholder:"Email"}),Object(u.jsx)(g.a,{icon:"fa fa-unlock",action:Ne("password"),value:ue,type:"password",placeholder:"Mot de passe"}),0===ve.role&&Object(u.jsx)("div",{className:"form-group",children:Object(u.jsxs)("select",{onChange:Ne("role"),class:"form-control",value:je,children:[Object(u.jsx)("option",{value:"",children:"R\xf4le"}),Object(u.jsx)("option",{value:0,children:"Administrateur"}),Object(u.jsx)("option",{value:1,children:"Distributeur"}),Object(u.jsx)("option",{value:2,children:"Vendeur"})]})})]}),Object(u.jsx)(v.a,{save:ke,loader:ie,cancel:De})]})})}),Object(u.jsx)("div",{class:"modal fade myModalUpdate",tabindex:"-1",role:"dialog","aria-labelledby":"myDefaultModalLabel",children:Object(u.jsx)("div",{class:"modal-dialog",role:"document",children:Object(u.jsxs)("div",{class:"modal-content",children:[Object(u.jsxs)("div",{class:"modal-header",children:[Object(u.jsx)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:De,children:Object(u.jsx)("span",{"aria-hidden":"true",class:"fa fa-times"})}),Object(u.jsx)("h5",{class:"modal-title",id:"myDefaultModalLabel",children:"Modifier l'utilisateur"})]}),ie&&Object(u.jsx)(N.a,{color:"secondary",style:{width:"100%"}}),Object(u.jsxs)("div",{class:"modal-body",children:[(oe||le)&&Object(u.jsxs)("div",{class:"alert bg-".concat(oe?"danger":"success"," alert-dismissible fade show"),role:"alert",children:[Object(u.jsxs)("strong",{children:[oe?"Erreur":"Succ\xe8s","!"]})," ",oe||le]}),Object(u.jsx)(g.a,{icon:"fa fa-user",action:we("updateFirstName"),value:me,type:"text",placeholder:"Nom"}),Object(u.jsx)(g.a,{icon:"fa fa-user",action:we("updateLastName"),value:pe,type:"text",placeholder:"Postnom"}),ve._id!==fe&&Object(u.jsx)("div",{className:"form-group",children:Object(u.jsxs)("select",{onChange:we("updateRole"),class:"form-control",value:xe,children:[Object(u.jsx)("option",{value:"",children:"R\xf4le"}),Object(u.jsx)("option",{value:0,children:"Administrateur"}),Object(u.jsx)("option",{value:1,children:"Distributeur"}),Object(u.jsx)("option",{value:2,children:"Vendeur"})]})})]}),Object(u.jsx)(v.a,{save:_e(fe),loader:ie,cancel:De})]})})}),Object(u.jsxs)("section",{className:"main-content",children:[Object(u.jsx)("div",{className:"card",children:Object(u.jsx)("div",{className:"card-body",children:Object(u.jsxs)("div",{className:"tabs",children:[Object(u.jsxs)("ul",{className:"nav nav-tabs justify-content-around",children:[Object(u.jsx)("li",{className:"nav-item",role:"presentation",children:Object(u.jsx)("a",{className:"nav-link text-tab active",href:"#home","aria-controls":"home",role:"tab","data-toggle":"tab","aria-selected":"true",children:"Clients"})}),Object(u.jsx)("li",{className:"nav-item",role:"presentation",children:Object(u.jsx)("a",{className:"nav-link text-tab",href:"#profile","aria-controls":"profile",role:"tab","data-toggle":"tab","aria-selected":"false",children:"Delivery persons"})}),Object(u.jsx)("li",{className:"nav-item",role:"presentation",children:Object(u.jsx)("a",{className:"nav-link text-tab",href:"#messages","aria-controls":"messages",role:"tab","data-toggle":"tab","aria-selected":"false",children:"Admin"})})]}),Object(u.jsxs)("div",{className:"tab-content",children:[ne&&Object(u.jsx)(w.a,{backdrop:!0,content:"loading...",style:{zIndex:2}}),Object(u.jsxs)("div",{role:"tabpanel",className:"tab-pane active",id:"home",children:[Object(u.jsxs)("div",{className:"row",style:{position:"relative",minHeight:400},children:[d&&d.map((function(e,t){if(e._id!==ve._id)return Object(u.jsx)(m.a,{data:e,onLoad:ie,onEdit:function(){return ye(e._id)},onDisable:function(){return Le(e._id)}},e._id)})),d&&d.map((function(e,t){if(e._id!==ve._id)return Object(u.jsx)(m.a,{data:e,onLoad:ie,onEdit:function(){return ye(e._id)},onDisable:function(){return Le(e._id)}},e._id)})),d&&d.map((function(e,t){if(e._id!==ve._id)return Object(u.jsx)(m.a,{data:e,onLoad:ie,onEdit:function(){return ye(e._id)},onDisable:function(){return Le(e._id)}},e._id)}))]}),Object(u.jsx)("div",{className:"",children:Object(u.jsx)(k.a,{prev:!0,next:!0,first:!0,last:!0,ellipsis:!0,boundaryLinks:!0,activePage:1,pages:30,maxButtons:5})})]}),Object(u.jsxs)("div",{role:"tabpanel",className:"tab-pane",id:"profile",children:[Object(u.jsx)("div",{className:"row",style:{position:"relative",minHeight:400},children:R&&R.map((function(e,t){if(e._id!==ve._id)return Object(u.jsx)(O,{data:e,onLoad:ie,onEdit:function(){return ye(e._id)},onDisable:function(){return Le(e._id)}},e._id)}))}),Object(u.jsx)("div",{className:"",children:Object(u.jsx)(k.a,{prev:!0,next:!0,first:!0,last:!0,ellipsis:!0,boundaryLinks:!0,activePage:1,pages:30,maxButtons:5})})]}),Object(u.jsxs)("div",{role:"tabpanel",className:"tab-pane",id:"messages",children:[Object(u.jsx)("div",{className:"row",style:{position:"relative",minHeight:400},children:E&&E.map((function(e,t){if(e._id!==ve._id)return Object(u.jsx)(p,{data:e,onLoad:ie,onEdit:function(){return ye(e._id)},onDisable:function(){return Le(e._id)}},e._id)}))}),Object(u.jsx)("div",{className:"",children:Object(u.jsx)(k.a,{prev:!0,next:!0,first:!0,last:!0,ellipsis:!0,boundaryLinks:!0,activePage:1,pages:30,maxButtons:5})})]})]})]})})}),Object(u.jsx)(x.a,{})]})]})}}}]);
//# sourceMappingURL=24.1fbbd09b.chunk.js.map